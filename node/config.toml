# Copyright (c) 2025-present Cesar Saguier Antebi
#
# This file is part of AIGEN Blockchain.
#
# This source code is licensed under the Business Source License 1.1
# found in the LICENSE file in the root directory of this source tree.

# AIGEN Node Configuration (TOML)

node_id = "node-1"
data_dir = "./data"

[model]
# Core model ID to load at startup
core_model_id = "mistral-7b"
# cache_dir defaults to <data_dir>/model-cache if omitted
cache_dir = "./data/model-cache"
# maximum resident memory for models (MB)
max_memory_mb = 4096
# number of ONNX runtime threads (0 = runtime default)
num_threads = 4
# Timeout for downloading model shards (seconds)
download_timeout_secs = 300
# Minimum number of redundant nodes per shard
min_redundancy_nodes = 1
# Worker mode - if true, this node downloads models but doesn't serve them
worker_mode = false
# Path where models are stored (LocalStorage backend)
model_storage_path = "./data/models"

[verification]
# inference verification cache size
cache_capacity = 256
# acceptable absolute error when comparing outputs
epsilon = 0.00001

[ads]
enabled = true
injection_rate = 0.5
max_ad_length = 500
max_total_output_length = 10000
upgrade_prompt_threshold = 8
free_tier_only = true

keypair_path = "./data/node_keypair.bin"

[network]
listen_addr = "/ip4/0.0.0.0/tcp/9000"
bootstrap_peers = []
max_peers = 50
enable_mdns = true

[network.gossipsub_config]
mesh_n = 6
mesh_n_low = 4
mesh_n_high = 12
heartbeat_ms = 700
max_transmit_size = 10485760

[network.reputation_config]
ban_threshold = 0.2
cleanup_interval_secs = 3600

[genesis]
# These values default to the built-in GenesisConfig::default() in the genesis crate.
# If you change them, you must ensure they match the rest of your network.
ceo_wallet = "0x0000000000000000000000000000000000000001"
ceo_public_key_bytes = [215, 90, 152, 1, 130, 177, 10, 183, 213, 84, 191, 237, 60, 150, 64, 115, 160, 238, 23, 47, 61, 170, 98, 50, 90, 240, 33, 166, 143, 112, 117, 26]
chain_id = "aigen-mainnet-1"
genesis_timestamp = 0
network_magic = 2711724449

[node]
# node_type: miner | validator | full_node | light_client
node_type = "full_node"
# validator_address is required for validator nodes (uncomment when needed)
# validator_address = "0x..."
# stake_amount is required for validator nodes in lamports (uncomment when needed)
# stake_amount = 1000000

[rpc]
rpc_enabled = true
rpc_addr = "0.0.0.0:9944"
rpc_cors = ["*"]
rpc_max_connections = 100
